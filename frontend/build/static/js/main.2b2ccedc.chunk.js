(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{155:function(e,t,n){},205:function(e,t,n){},222:function(e,t,n){},293:function(e,t,n){},294:function(e,t,n){},321:function(e,t,n){},329:function(e,t,n){},330:function(e,t,n){},396:function(e,t,n){},397:function(e,t,n){},415:function(e,t,n){},504:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(32),i=n.n(c),s=(n(293),n(102)),o=n(48),l=(n(294),n(6)),u=n(510),j=n(11),d=n.n(j),b=n(20),p=n(283),h=n(82),O=n(508),f=n(51),m=n(50),x=n(179),v=n(521),y=(n(222),n(527)),g=n(528),w=n(99),C="http://localhost:9999",S=n(57),k=n.n(S);k.a.defaults.withCredentials=!0;var I=function(){var e=Object(b.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:9999/api/login",{method:"POST",body:JSON.stringify({email:t,password:n}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),N=function(){var e=Object(b.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get(C+"/api/logout").then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){var e=Object(b.a)(d.a.mark((function e(t,n,a,r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:9999/api/register",{method:"POST",body:JSON.stringify({name:t,email:n,password:a,code:r}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),P=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("http://localhost:9999/api/auth",{method:"POST",body:JSON.stringify({email:t}),headers:{"Content-Type":"application/json"}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("http://localhost:9999/api/reset_token",{method:"POST",body:JSON.stringify({email:t}),headers:{"Content-Type":"application/json"}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(b.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:9999/api/reset_pwd/"+t,{method:"POST",body:JSON.stringify({password:n}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=Object(b.a)(d.a.mark((function e(){var t,n=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"",e.next=3,k.a.get("http://localhost:9999/api/cur_user/"+t).then((function(e){return e.data}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get("http://localhost:9999/api/cur_user/info").then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(C+"/api/cur_user/info/update",{method:"POST",credentials:"include",body:JSON.stringify({name:t.inputName,phone:t.inputPNumber,city:t.inputCity,intro:t.inputIntro}),headers:{"Content-Type":"application/json"}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=n(2),J=function(e){var t=Object(a.useState)({}),n=Object(l.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(!1),o=Object(l.a)(i,2),u=o[0],j=o[1];Object(a.useEffect)((function(){E().then(function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t.uuid){e.next=3;break}return e.next=3,F().then((function(e){return c(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]);var C=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N().then((function(e){return p.b.error({content:"Log out successfully. You will be redirected to main page in 1 seconds",duration:1,icon:Object(L.jsx)(y.a,{twoToneColor:"#52c41a"}),onClose:function(){window.location.href="/"}})}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=Object(L.jsxs)(h.a,{children:[Object(L.jsxs)(h.a.Item,{children:["Logged in as ",Object(L.jsx)("b",{children:r.name})]}),Object(L.jsx)(O.a,{}),Object(L.jsx)(h.a.Item,{children:Object(L.jsx)(s.b,{to:{pathname:"/user",state:{key:"1"}},children:"My Profile"})},"profile"),Object(L.jsx)(h.a.Item,{children:Object(L.jsx)(s.b,{to:{pathname:"/user",state:{key:"2"}},children:"My Posts"})},"posts"),Object(L.jsx)(h.a.Item,{children:Object(L.jsx)(s.b,{to:{pathname:"/user",state:{key:"3"}},children:"My Transactions"})},"transactions"),Object(L.jsx)(O.a,{}),Object(L.jsx)(h.a.Item,{danger:!0,onClick:C,children:"Log out"},"logout")]});return Object(L.jsxs)("header",{className:"header",children:[Object(L.jsx)("a",{href:"http://localhost:3000/map",children:Object(L.jsx)("img",{src:"https://i.ibb.co/k3rqzWb/Petpal-logo.png",alt:"Petpal-logo",border:"0",width:200})}),void 0===r.name?Object(L.jsxs)("span",{className:"header-btns",children:[Object(L.jsx)(f.a,{title:"Post now!",children:Object(L.jsx)(m.a,{danger:!0,shape:"circle",icon:Object(L.jsx)(g.a,{}),href:"/post"})}),Object(L.jsx)(s.b,{className:"header-btn",to:"/login",children:"Log in"}),Object(L.jsx)(m.a,{className:"header-btn",type:"primary",href:"/register",children:"Sign up"})]}):Object(L.jsxs)("span",{className:"header-btns",children:[Object(L.jsx)(f.a,{title:"Post now!",children:Object(L.jsx)(m.a,{danger:!0,shape:"circle",icon:Object(L.jsx)(g.a,{}),href:"/post"})}),Object(L.jsx)(x.a,{overlay:S,onVisibleChange:function(){j(!u)},visible:u,children:Object(L.jsxs)("div",{style:{display:"inline"},children:[Object(L.jsx)(v.a,{style:{marginLeft:"8px",marginRight:"8px"},src:r.avatar}),Object(L.jsx)(w.a,{})]})})]})]})},R=n(115),M=n(526),U=n(522),G=n(194),H=(n(199),n(525)),B=(n(321),n(514)),V=function(e){var t=B.a.Meta,n=Object(a.useState)(e.content.name),r=Object(l.a)(n,2),c=r[0],i=r[1];return Object(a.useEffect)((function(){i(e.content.name)}),[e.name]),Object(L.jsxs)(B.a,{className:"animal-thumbnail",hoverable:!0,cover:Object(L.jsx)("img",{alt:"example",style:{height:"100%",objectFit:"cover",width:300},src:e.content.image}),onClick:function(){return e.setDisplay(e.index)},children:[Object(L.jsx)(t,{title:c,description:e.content.price+" CAD"}),Object(L.jsx)("br",{}),Object(L.jsx)(m.a,{type:"primary",children:"View Info"})]})},z=function(e){var t=Object(a.useState)(e.animalInfos),n=Object(l.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){c(e.animalInfos)}),[e.animalInfos]),Object(L.jsx)("div",{children:Object(L.jsx)(H.b,{style:{width:"100%",height:0},itemLayout:"horizontal",dataSource:r,renderItem:function(t,n){return Object(L.jsx)(H.b.Item,{className:"animal-list-item",id:t.id,style:{width:"100%",padding:8},children:Object(L.jsx)(V,{content:t,index:n,setDisplay:e.setDisplay})})}})})},K=n(518),W=n(221),Y=n(529),$=(n(329),function(e){var t=Object(a.useState)("none"),n=Object(l.a)(t,2),r=(n[0],n[1],e.data);Object(a.useEffect)((function(){return function(){var e,t=document.getElementsByClassName("animal-list-item"),n=Object(R.a)(t);try{for(n.s();!(e=n.n()).done;){e.value.style.display="block"}}catch(a){n.e(a)}finally{n.f()}}}),[]);var c=function(e){var t,n=document.getElementsByClassName("animal-list-item"),a=0,c=Object(R.a)(n);try{for(c.s();!(t=c.n()).done;){var i=t.value;void 0!==r[a]?(r[a].kind.toUpperCase()===e.target.innerText.toUpperCase()?i.style.display="block":i.style.display="none",a++):i.style.display="none"}}catch(s){c.e(s)}finally{c.f()}};return Object(L.jsxs)("div",{className:"filter-border",children:["Kind:",Object(L.jsx)("br",{}),Object(L.jsxs)("div",{children:[Object(L.jsx)(m.a,{className:"kind-filter-option",shape:"round",onClick:c,children:"Cat"}),Object(L.jsx)(m.a,{className:"kind-filter-option",shape:"round",onClick:c,children:"Dog"}),Object(L.jsx)(m.a,{className:"kind-filter-option",shape:"round",onClick:c,children:"Bird"}),Object(L.jsx)(m.a,{className:"kind-filter-option",shape:"round",onClick:c,children:"Fish"})]})]})}),q=function(e){var t=Object(a.useState)({min:0,max:100}),n=Object(l.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)({min:0,max:100}),s=Object(l.a)(i,2),o=s[0],u=s[1],j=e.sortedData,d=e.data;Object(a.useEffect)((function(){return c({min:j[0].price,max:j[j.length-1].price}),function(){var e,t=document.getElementsByClassName("animal-list-item"),n=Object(R.a)(t);try{for(n.s();!(e=n.n()).done;){e.value.style.display="block"}}catch(a){n.e(a)}finally{n.f()}}}),[]),Object(a.useEffect)((function(){u({min:j[0].price,max:j[j.length-1].price})}),[]);var b=function(e){var t,n=Object(l.a)(e,2),a=n[0],r=n[1],c=document.getElementsByClassName("animal-list-item"),i=0,s=Object(R.a)(c);try{for(s.s();!(t=s.n()).done;){var o=t.value;void 0!==d[i]?(d[i].price>=a&&d[i].price<=r?o.style.display="block":o.style.display="none",i++):o.style.display="none"}}catch(j){s.e(j)}finally{s.f()}u({min:a,max:r})};return Object(L.jsxs)("div",{className:"filter-border",children:["Price Range:",Object(L.jsx)("br",{}),Object(L.jsx)(K.a,{id:"minPriceInput",min:r.min,max:o.max,defaultValue:r.min,value:o.min,bordered:!1,size:"large",formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},onChange:function(e){b([e,o.max])}}),Object(L.jsx)(Y.a,{}),Object(L.jsx)(K.a,{id:"maxPriceInput",min:o.min,max:r.max,defaultValue:r.max,value:o.max,bordered:!1,size:"large",formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},onChange:function(e){b([o.min,e])}}),Object(L.jsx)(W.a,{range:!0,min:r.min,max:r.max,defaultValue:[r.min,r.max],value:[o.min,o.max],onChange:b})]})},Q=(n(330),void 0),X=function(e){var t=Object(a.useState)(-1),n=Object(l.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(e.animalInfos),s=Object(l.a)(i,2),o=s[0],u=s[1];Object(a.useEffect)((function(){u(e.animalInfos)}),[e.animalInfos]);var j,d=function(e,t){return e.price>t.price?1:-1},b=function(e){if(0===r&&"Kind"==e.target.innerText||1===r&&"Price"==e.target.innerText)c(-1);else switch(e.target.innerText){case"Kind":c(0);break;case"Price":c(1)}};return Object(L.jsx)("div",{className:"animal-list",style:{height:"100%"},children:Object(L.jsxs)(M.b,{direction:"vertical",style:{width:"100%",height:"100%",overflow:"scroll",padding:8},children:[Object(L.jsx)(U.a,{placeholder:" Search animal names, descriptions here...",allowClear:!0,onKeyUp:function(e){console.log(o);var t=e.target.value.toUpperCase(),n=document.getElementsByClassName("animal-list-item");if(void 0!==o){console.log(n);var a,r=-1,c=Object(R.a)(n);try{for(c.s();!(a=c.n()).done;){var i=a.value;r++,void 0!==o[r]?(console.log(o[i.id]),-1==o[r].name.toUpperCase().indexOf(t)&&""!=t?i.style.display="none":i.style.display="block"):console.log("Ignoring...",i.id)}}catch(s){c.e(s)}finally{c.f()}}}.bind(Q),style:{marginLeft:"4px",width:"96%",height:"30px",padding:0},suffix:Object(L.jsx)(G.a,{style:{marginRight:"5px"}})}),Object(L.jsxs)("div",{className:"filterView",children:[Object(L.jsx)("b",{style:{margin:"2px",fontSize:"16px"},children:"Filter:"}),Object(L.jsx)(m.a,{className:"filter-type",shape:"round",onClick:b.bind(Q),children:"Kind"}),Object(L.jsx)(m.a,{className:"filter-type",shape:"round",onClick:b.bind(Q),children:"Price"})]}),0===r?Object(L.jsx)($,{data:o}):1===r?Object(L.jsx)(q,{sortedData:(j=o,JSON.parse(JSON.stringify(j)).sort(d)),data:o}):"",Object(L.jsx)(z,{style:{width:"inherit"},animalInfos:o,setDisplay:e.setDisplay})]})})},Z=n(534),ee=n(535),te=n(536),ne=n(537),ae=n(523),re=n(509),ce=n(530),ie=n(531),se=n(532),oe=n(533);k.a.defaults.withCredentials=!0;var le=function(){var e=Object(b.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k.a.get(C+"/api/comment/"+t+"/"+n).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ue=function(){var e=Object(b.a)(d.a.mark((function e(t,n,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(C+"/api/comment/",{method:"POST",body:JSON.stringify({fcid:"comment"===n?t:void 0,uaid:"animal"===n?t:void 0,uuid:"user"===n?t:void 0,content:a,time:new Date}),headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),je=function(){var e=Object(b.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(C+"/api/comment/like/"+n+"/"+t,{method:"POST",credentials:"include"}).then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),de=function(){var e=Object(b.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(C+"/api/comment/dislike/"+n+"/"+t,{method:"POST",credentials:"include"}).then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),be=n(517),pe=function(e){var t=be.a.useForm(),n=Object(l.a)(t,1)[0],r=Object(a.useState)(""),c=Object(l.a)(r,2),i=c[0],s=c[1],o=Object(a.useRef)("");Object(a.useEffect)((function(){F().then((function(e){return s(e.avatar)}))}),[]);return Object(L.jsx)(re.a,{avatar:Object(L.jsx)(v.a,{src:i,alt:"Han Solo"}),content:Object(L.jsxs)(be.a,{form:n,onFinish:function(t){var a=t.commentText;n.resetFields(),e.onSubmitFinish(!1),e.onCommentSubmit(e.id,e.type,a)},children:[Object(L.jsx)(be.a.Item,{name:"commentText",children:Object(L.jsx)(U.a.TextArea,{ref:o,id:"comment-text",rows:3,style:{maxWidth:"90%",resize:"none"}})}),Object(L.jsx)(be.a.Item,{children:Object(L.jsx)(m.a,{htmlType:"submit",type:"primary",children:"Add Comment"})})]})})},he=function(e){var t=e.commentDetail,n=Object(a.useState)(!1),r=Object(l.a)(n,2),c=r[0],i=r[1],s=Object(a.useState)(t.likes.length),o=Object(l.a)(s,2),u=o[0],j=o[1],d=Object(a.useState)(!1),b=Object(l.a)(d,2),p=b[0],h=b[1],O=Object(a.useState)(!1),m=Object(l.a)(O,2),x=m[0],y=m[1],g=function(){i(!1),j(u-1),je(t.ucid,"cancel")},w=function(){h(!1),de(t.ucid,"cancel")},C=[Object(L.jsx)(f.a,{title:"Like",children:Object(L.jsxs)("span",{onClick:function(){c?g():(i(!0),j(u+1),h(!1),console.log(t.ucid),je(t.ucid,"set"),p&&w())},children:[Object(a.createElement)(c?ce.a:ie.a),Object(L.jsx)("span",{className:"comment-action",children:u})]})},"comment-basic-like"),Object(L.jsx)(f.a,{title:"Dislike",children:Object(L.jsx)("span",{onClick:function(){p?w():(h(!0),de(t.ucid,"set"),c&&g())},children:Object(a.createElement)(p?se.a:oe.a)})},"comment-basic-dislike"),Object(L.jsx)("span",{onClick:function(){y(!x)},children:"Reply to"},"comment-basic-reply-to")];return Object(L.jsxs)(re.a,{actions:C,author:Object(L.jsx)("a",{children:t.name}),avatar:Object(L.jsx)(v.a,{src:t.avatar,alt:"Username loading..."}),content:Object(L.jsx)("p",{children:t.content}),datetime:Object(L.jsx)("span",{children:function(e){var t=(e=new Date(e)).getFullYear(),n=e.getMonth()+1;n=n<10?"0"+n:n;var a=e.getDate();a=a<10?"0"+a:a;var r=e.getHours(),c=e.getMinutes();c=c<10?"0"+c:c;var i=e.getSeconds();return t+"-"+n+"-"+a+" "+r+":"+c+":"+(i=c<10?"0"+i:i)}(t.time)}),children:[e.replies,x?Object(L.jsx)(pe,{id:e.id,type:e.type,onCommentSubmit:e.onCommentSubmit,onSubmitFinish:y}):""]})},Oe=(n(396),function(e){var t=Object(a.useState)([]),n=Object(l.a)(t,2),r=n[0],c=n[1];Object(a.useEffect)(Object(b.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,le(e.commentType,e.id).then((function(e){return c(e)}));case 2:case"end":return t.stop()}}),t)}))),[]);var i=function(){var t=Object(b.a)(d.a.mark((function t(n,a,r){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=ue(n,a,r),t.next=3,le(e.commentType,e.id).then((function(e){return c(e)}));case 3:t.t1=t.sent,t.t0.then.call(t.t0,t.t1);case 5:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}();return Object(L.jsxs)("div",{className:"comments-wrapper",children:[Object(L.jsx)(pe,{id:e.id,type:e.commentType,onCommentSubmit:i,onSubmitFinish:function(){}}),Object(L.jsx)(H.b,{dataSource:r,header:"".concat(r.length," ").concat(r.length>1?"comments":"comment"),itemLayout:"horizontal",locale:{emptyText:" "},renderItem:function(e){return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(he,{commentDetail:e,onCommentSubmit:i,id:e.ucid,type:"comment",replies:e.replies.map((function(t){return Object(L.jsx)(he,{commentDetail:t,onCommentSubmit:i,id:e.ucid,type:"comment"})}))}),Object(L.jsx)(O.a,{})]})}})]})}),fe=(n(397),B.a.Meta),me=function(e){var t=Object(a.useState)(null),n=Object(l.a)(t,2),r=n[0],c=n[1];Object(a.useEffect)((function(){E().then(function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(t.uuid);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]);var i=e.animalCardInfo;void 0===i&&(i={name:"None",image:"/image-not-found.png",age:0,price:0,user:"None",userAvatar:"None",kind:"None",description:"None"});return Object(L.jsx)("div",{children:Object(L.jsxs)("div",{style:{height:"100%",overflow:"auto",position:"absolute"},children:[Object(L.jsxs)("div",{className:"card-header",children:[Object(L.jsx)(m.a,{type:"text",onClick:function(){return e.setDisplay(-1)},children:Object(L.jsx)(Z.a,{})}),Object(L.jsx)(fe,{avatar:Object(L.jsx)(v.a,{src:i.userAvatar}),title:i.user})]}),Object(L.jsxs)(B.a,{style:{width:"100%",marginBottom:"20px"},cover:Object(L.jsx)("img",{alt:"example",src:i.image}),actions:[Object(L.jsx)(ee.a,{}),Object(L.jsx)(te.a,{})],children:[Object(L.jsx)("hr",{color:"white"}),Object(L.jsx)("hr",{color:"white"}),Object(L.jsxs)(ae.b,{bordered:!0,children:[Object(L.jsx)(ae.b.Item,{label:"Name",span:3,children:i.name}),Object(L.jsx)(ae.b.Item,{label:"Age",span:3,children:i.age}),Object(L.jsx)(ae.b.Item,{label:"Kind",span:3,children:i.kind}),Object(L.jsx)(ae.b.Item,{label:"Street",span:1.5,children:"3338 Webber Lane"}),Object(L.jsx)(ae.b.Item,{label:"City",span:1.5,children:"Vancouver"}),Object(L.jsx)(ae.b.Item,{label:"Price (CAD)",span:3,children:i.price}),Object(L.jsx)(ae.b.Item,{label:"Description",children:i.description})]})]}),Object(L.jsx)(Oe,{commentType:"animal",id:e.aid}),Object(L.jsx)("div",{className:"shopping-cart-wrapper",children:Object(L.jsx)("span",{className:"cta-button-round",onClick:function(){return null!==r&&void 0!==r?e.setDisplayCheckout(!0):void(window.confirm("Please log in to make the payment.")&&(window.location.href="/login"))},children:Object(L.jsx)(ne.a,{})})})]})})},xe=n(148),ve={position:"absolute",width:"62%",height:"92%"},ye=[],ge=Object(xe.GoogleApiWrapper)({apiKey:"AIzaSyDnMJlodY_mrnG1k--Ol-Ocm9bWgaJF18k"})((function(e){var t=Object(a.useState)({}),n=Object(l.a)(t,2),r=n[0],c=n[1],i=e.animalCardInfo;console.log("aid is:",e.aid),Object(a.useEffect)((function(){e.aid>-1&&ye[e.aid].marker.click()}),[]);var s=function(t){e.setDisplay(function(e){for(var t in ye)if(ye[t].props.position===e.position)return t}(t)),c(t)};return Object(L.jsxs)(xe.Map,{containerStyle:ve,google:e.google,zoom:14,initialCenter:{lat:49.26127572955761,lng:-123.23869115661624},center:r.position,children:[i.map((function(e,t){return Object(L.jsx)(xe.Marker,{name:e.name,position:e.position,onClick:s,ref:function(e){return ye[t]=e}})})),Object(L.jsx)(xe.InfoWindow,{marker:e.aid>-1?ye[e.aid].marker:null,visible:e.aid>-1,onClose:function(e){},children:Object(L.jsxs)("div",{className:"hello",children:[Object(L.jsx)("h3",{children:e.aid>-1?i[e.aid].name:""}),Object(L.jsx)("pre",{children:e.aid>-1?i[e.aid].address:""})]})})]})})),we=n(62),Ce=n(116),Se=n(274),ke=n(515),Ie=n(538);k.a.defaults.withCredentials=!0;var Ne="pending",Te=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get(C+"/api/transaction/uuid").then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Pe=ke.a.Title,_e=ke.a.Text,De="http://localhost:9999/",Ee=function(e){var t=Object(a.useState)(""),n=Object(l.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(!1),s=Object(l.a)(i,2),o=s[0],u=s[1],j=Object(a.useState)(null),p=Object(l.a)(j,2),h=p[0],O=p[1],f=Object(a.useState)(null),x=Object(l.a)(f,2),v=x[0],y=x[1],g=Object(Ce.useStripe)(),w=Object(Ce.useElements)();Object(a.useEffect)((function(){var t={id:e.animal.id};fetch(De+"animalinfo/userinfo",{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(t)}).then((function(e){if(200===e.status)return e.json();e.status>=400&&console.log("cannot get user info")})).then((function(e){e&&y(e.uuid)}))}),[]),E().then(function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O(t.uuid);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var C=function(){var t=Object(b.a)(d.a.mark((function t(n){var a,r,i,s,o,l,j;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,g.createPaymentMethod({type:"card",card:w.getElement(Ce.CardElement)});case 3:if(a=t.sent,r=a.error,i=a.paymentMethod,r)c(r.message);else try{u(!0),s=i.id,o={amount:100*e.animal.price,id:s},fetch(De+"api/payment",{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(o)}).then((function(t){200===t.status?e.setPaymentSuccess(!0):t.status>=400&&t.text().then((function(e){return c(e)}))})),l={buyerId:h,sellerId:v,animalId:e.animal._id,timestamp:new Date,price:e.animal.price,status:Ne,tag:e.animal.kind},fetch(De+"api/transaction/add",{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(l)}).then((function(t){200===t.status?t.json().then((function(t){e.setNewTransaction(t.data)})):t.status>=400&&t.text().then((function(e){return c(e)}))})),j={id:e.animal.id,status:"sold"},fetch(De+"animalinfo/changestatus",{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(j)}).then((function(e){200===e.status?console.log("animal status successfully updated"):e.status>=400&&console.log("Fail to update animal status")}))}catch(d){c(d.message)}case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(L.jsxs)("div",{className:"credit-card-form",children:[Object(L.jsxs)(Pe,{level:2,className:"payment-summary",children:[Object(L.jsxs)("span",{children:["Payment for ",e.animal.name]}),Object(L.jsxs)("span",{children:["$",e.animal.price]})]}),Object(L.jsxs)("form",{onSubmit:C,children:[Object(L.jsx)("h3",{children:"Please enter your valid credit card"}),Object(L.jsx)("fieldset",{className:"form-group",children:Object(L.jsx)("div",{className:"form-row",children:Object(L.jsx)(Ce.CardElement,{options:{iconStyle:"solid",hidePostalCode:!0,style:{base:{iconColor:"#212121",color:"#06070f",backgroundColor:"transparent",fontSize:"14px"},invalid:{iconColor:"#ff4d4f",color:"#ff4d4f"},complete:{iconColor:"#00b8b0"}}},onChange:function(e){e.error?c(e.error.message):c()}})})}),o?Object(L.jsx)(_e,{children:"Processing Payment"}):Object(L.jsx)(m.a,{type:"primary",htmlType:"submit",children:"Make Payment"})]}),Object(L.jsxs)("div",{className:""===r||void 0===r?"error-msg hidden":"error-msg",children:[Object(L.jsx)(Ie.a,{twoToneColor:"#ff4d4f"}),Object(L.jsxs)(_e,{type:"danger",children:[" ",r]})]})]})},Fe=Object(Se.loadStripe)("pk_test_51J2f66JoWtlpotrESG51Kl1u0CjSHCLPwdIliNtHh5WGX3aGwGupHt8yXZsFt1VcQ6fZeUeZQgEEP0vBuKg7QXVj00M3IuU3JR"),Ae=function(e){return Object(L.jsx)(Ce.Elements,{stripe:Fe,children:Object(L.jsx)(Ee,{animal:e.animal,setPaymentSuccess:e.setPaymentSuccess,setNewTransaction:e.setNewTransaction})})},Le=(n(415),n(539)),Je=n(540),Re=ke.a.Title,Me=ke.a.Text,Ue=ke.a.Link;var Ge=function(e){return Object(L.jsxs)("div",{className:"order-confirmation",children:[Object(L.jsx)(Le.a,{twoToneColor:"#00b8b0"}),Object(L.jsx)(Re,{level:3,children:"Successful Payment"}),Object(L.jsxs)("div",{className:"order-info",children:[Object(L.jsxs)(Re,{level:4,children:["Order Number: ",e.newTransaction.orderNumber]}),Object(L.jsx)(Me,{children:(new Date).toLocaleString("en-CA")}),Object(L.jsx)("hr",{}),Object(L.jsxs)(Re,{level:4,className:"payment-summary",children:[Object(L.jsx)("span",{children:e.animal.name}),Object(L.jsxs)("span",{children:["$",e.animal.price]})]})]}),Object(L.jsxs)("div",{className:"thank-you-message",children:[Object(L.jsx)(Re,{level:3,children:"Thank You!!!"}),Object(L.jsxs)(Me,{children:[e.animal.name," is excited to see you."]}),Object(L.jsxs)(Me,{children:["Have a lovely day ",Object(L.jsx)(Je.a,{})]})]}),Object(L.jsx)(Ue,{href:"http://localhost:3000/user",className:"link-block",children:"View your order"})]})},He=B.a.Meta,Be=function(e){var t=e.animalInfos[e.aid],n=Object(a.useState)(!1),r=Object(l.a)(n,2),c=r[0],i=r[1],s=Object(a.useState)(null),o=Object(l.a)(s,2),u=o[0],j=o[1];return Object(L.jsxs)("div",{className:"payment-wrapper",children:[Object(L.jsxs)("div",{className:"card-header",children:[Object(L.jsx)(m.a,{type:"text",onClick:function(){c&&e.setDisplay(-1),e.setDisplayCheckout(!1)},children:Object(L.jsx)(we.a,{})}),Object(L.jsx)(He,{avatar:Object(L.jsx)(v.a,{src:t.userAvatar}),title:t.user})]}),Object(L.jsx)(B.a,{style:{width:"100%"},cover:Object(L.jsx)("img",{alt:"example",src:t.image}),children:c?Object(L.jsx)(Ge,{animal:t,newTransaction:u}):Object(L.jsx)(Ae,{animal:t,setPaymentSuccess:i,setNewTransaction:j})})]})},Ve=function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(C+"/animalInfo",{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ze=function(e){var t=Object(a.useState)(-1),n=Object(l.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(!1),s=Object(l.a)(i,2),o=s[0],j=s[1],d=Object(a.useState)([]),b=Object(l.a)(d,2),p=b[0],h=b[1],O=function(e){c(e)};return Object(a.useEffect)((function(){Ve().then((function(e){console.log("fetchAnimalList",e),h(e),console.log(typeof p)}))}),[r]),Object(L.jsxs)(u.a,{children:[Object(L.jsx)(J,{}),Object(L.jsxs)(u.a,{children:[Object(L.jsx)(u.a.Sider,{width:"38%",style:{backgroundColor:"white"},children:-1===r?Object(L.jsx)(X,{animalInfos:p,setDisplay:O}):o?Object(L.jsx)(Be,{aid:r,setDisplay:O,setDisplayCheckout:j,animalInfos:p}):Object(L.jsx)(me,{aid:r,animalCardInfo:p[r],setDisplay:O,setDisplayCheckout:j})}),Object(L.jsx)(u.a,{children:Object(L.jsx)(u.a.Content,{children:Object(L.jsx)(ge,{aid:r,animalCardInfo:p,setDisplay:O})})})]})]})},Ke=n(4),We=(n(205),n(281)),Ye=function(e){var t=Object(a.useRef)(""),n=Object(a.useState)(!1),r=Object(l.a)(n,2),c=r[0],i=r[1],s={wrapperCol:{offset:6,span:18}},o=function(){i(!c)},u=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t.email,t.password).then(function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(t.uuid).then((function(){t.success?p.b.error({content:t.message,duration:2,icon:Object(L.jsx)(y.a,{twoToneColor:"#52c41a"}),onClose:function(){window.location.href="/"}}):p.b.error({content:t.message,duration:3})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(L.jsxs)("div",{children:[Object(L.jsx)(J,{}),Object(L.jsx)("div",{className:"form_container",children:Object(L.jsxs)("div",{id:"login_form_wrapper",children:[Object(L.jsx)("h1",{className:"form_title",children:"Log in"}),Object(L.jsxs)(be.a,Object(Ke.a)(Object(Ke.a)({},{labelCol:{span:6},wrapperCol:{span:18}}),{},{name:"basic",onFinish:u,onFinishFailed:function(e){console.log("Failed:",e)},children:[Object(L.jsx)(be.a.Item,{label:"Email",name:"email",place:!0,children:Object(L.jsx)(U.a,{})}),Object(L.jsx)(be.a.Item,{label:"Password",name:"password",children:Object(L.jsx)(U.a.Password,{})}),Object(L.jsxs)(be.a.Item,Object(Ke.a)(Object(Ke.a)({},s),{},{children:[Object(L.jsx)(m.a,{type:"primary",htmlType:"submit",children:"Submit"}),Object(L.jsx)("a",{className:"login-form-forgot",onClick:o,children:"Forgot password"})]})),Object(L.jsxs)(be.a.Item,Object(Ke.a)(Object(Ke.a)({},s),{},{children:["New user? ",Object(L.jsx)("a",{href:"/register",children:" Sign up here! "})]})),Object(L.jsxs)(We.a,{title:"Reset Password",visible:c,onCancel:o,onOk:function(){_(t.current.state.value),o()},children:[Object(L.jsx)("p",{children:"Please input your email here:"}),Object(L.jsx)(U.a,{ref:t}),Object(L.jsx)("p",{children:"After you submit, an confirmation email will be sent to your email address. Please follow instructions in it"})]})]}))]})})]})},$e=n(144),qe=n(146),Qe=n(512),Xe=n(513),Ze=n(286);k.a.defaults.withCredentials=!0;var et=function(){var e=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(C+"/animalInfo/post",{method:"POST",body:JSON.stringify(t),headers:new Headers({Accept:"application/json","Content-Type":"application/json"})});case 2:n=e.sent,console.log(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),tt=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get(C+"/animalInfo/uuid").then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),nt=function(e){return new Promise((function(t,n){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){return t(a.result)},a.onerror=function(e){return n(e)}}))};k.a.defaults.withCredentials=!0;var at=function(){var e=qe.a.Option,t=U.a.TextArea,n=Object(a.useState)(null),r=Object(l.a)(n,2),c=r[0],i=r[1],s=Object(a.useState)(null),o=Object(l.a)(s,2),u=o[0],j=o[1],h=Object(a.useState)(null),O=Object(l.a)(h,2),f=O[0],x=O[1],v=Object(a.useState)(null),y=Object(l.a)(v,2),g=y[0],w=y[1],C=Object(a.useState)(null),S=Object(l.a)(C,2),k=S[0],I=S[1],N=Object(a.useState)(null),T=Object(l.a)(N,2),P=T[0],_=T[1],D=Object(a.useState)(null),E=Object(l.a)(D,2),A=E[0],R=E[1],M=Object(a.useState)([]),G=Object(l.a)(M,2),H=G[0],B=G[1],V=Object(a.useState)(null),z=Object(l.a)(V,2),W=z[0],Y=z[1],$=Object(a.useState)(!1),q=Object(l.a)($,2),Q=q[0],X=q[1],Z=Object(a.useState)(""),ee=Object(l.a)(Z,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(""),re=Object(l.a)(ae,2),ce=re[0],ie=re[1],se=function(){var e=Object(b.a)(d.a.mark((function e(t){var n,a,r,i,s,o,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),console.log("handlePostAnimal"),null!==P&&void 0!==c.value.description&&null!==g&&null!==f&&null!==k&&null!==W&&null!==P&&null!==u&&null!==A){e.next=5;break}return window.alert("Have empty field!"),e.abrupt("return");case 5:return n=c.value.description,e.next=8,F().then((function(e){return e}));case 8:return a=e.sent,console.log(a),void 0!==a.message&&(window.alert("Not login, redirecting..."),window.location.href="/login"),e.next=13,Object($e.b)(n).then((function(e){return Object($e.c)(e[0])})).then((function(e){var t=e.lat,n=e.lng;return console.log("Successfully got latitude and longitude",{lat:t,lng:n}),{lat:t,lng:n}}));case 13:if(void 0!==(r=e.sent).lat&&void 0!==r.lng){e.next=17;break}return window.alert("Cannot get GPS coordinates!"),e.abrupt("return");case 17:if(!(void 0===H.fileList||H.fileList.length<=0)){e.next=22;break}return window.alert("You should at least upload one image!"),e.abrupt("return");case 22:i=0;case 23:if(!(i<H.fileList.length)){e.next=31;break}if(ue(H.fileList[i])){e.next=28;break}return s="Number "+i+" is not a JPG/PNG file!",window.alert(s),e.abrupt("return");case 28:i++,e.next=23;break;case 31:return o={id:"",name:u,address:n,animalAgeYear:g,animalAgeMonth:f,dateFound:k,kind:P,price:A,description:W,image:H.fileList[0].thumbUrl,userinfo:a._id,position:{lat:r.lat,lng:r.lng}},console.log(o),l={animalinfo:o,userUUID:a.uuid},e.next=36,et(l);case 36:le(),alert("Posted!"),window.location.href="/";case 39:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.url||t.preview){e.next=4;break}return e.next=3,nt(t.originFileObj);case 3:t.preview=e.sent;case 4:X(!0),ie(t.name||t.url.substring(t.url.lastIndexOf("/")+1)),ne(t.url||t.preview);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(){console.log("resetInput")},ue=function(e){return console.log(e),!("image/jpeg"!==e.type&&"image/png"!==e.type)||(p.b.error("You can only upload JPG/PNG file!"),!1)},je=Object(L.jsxs)("div",{children:[Object(L.jsx)(Ze.a,{}),Object(L.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return Object(L.jsxs)("div",{children:[Object(L.jsx)(J,{}),Object(L.jsx)("div",{className:"form_container",children:Object(L.jsxs)("div",{id:"post_animal_form_wrapper",children:[Object(L.jsx)("h1",{className:"form_title",children:"Post New Animal"}),Object(L.jsxs)(be.a,Object(Ke.a)(Object(Ke.a)({},{labelCol:{span:6},wrapperCol:{span:18}}),{},{children:[Object(L.jsx)(be.a.Item,{label:"Animal Name",name:"animal_name_input",children:Object(L.jsx)(U.a,{placeholder:"Please enter animal name",onChange:function(e){return j(e.target.value)}})}),Object(L.jsx)(be.a.Item,{label:"Age",children:Object(L.jsxs)(U.a.Group,{compact:!0,children:[Object(L.jsx)(be.a.Item,{name:["age","years"],noStyle:!0,children:Object(L.jsx)(K.a,{placeholder:"years",min:0,formatter:function(e){return"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},onChange:function(e){return w(e)}})}),Object(L.jsx)(be.a.Item,{name:["age","months"],noStyle:!0,children:Object(L.jsx)(K.a,{placeholder:"months",min:0,formatter:function(e){return"".concat(e)},onChange:function(e){return x(e)}})})]})}),Object(L.jsx)(be.a.Item,{label:"Location",children:Object(L.jsx)($e.a,{apiKey:"AIzaSyDnMJlodY_mrnG1k--Ol-Ocm9bWgaJF18k",selectProps:{location:c,onChange:i}})}),Object(L.jsx)(be.a.Item,{label:"Date Found",name:"date_found_input",children:Object(L.jsx)(Qe.a,{onChange:function(e,t){console.log("onDateChange",t),I(t)}})}),Object(L.jsx)(be.a.Item,{label:"Category",name:"animal_category_input",children:Object(L.jsxs)(qe.a,{defaultValue:"Select",onChange:function(e){_(e)},children:[Object(L.jsx)(e,{value:"Squirrel",children:"Squirrel"}),Object(L.jsx)(e,{value:"bird",children:"Bird"}),Object(L.jsx)(e,{value:"cat",children:"Cat"}),Object(L.jsx)(e,{value:"chicken",children:"Chicken"}),Object(L.jsx)(e,{value:"dog",children:"Dog"}),Object(L.jsx)(e,{value:"duck",children:"Duck"}),Object(L.jsx)(e,{value:"fish",children:"Fish"}),Object(L.jsx)(e,{value:"guinea_pig",children:"Guinea Pig"}),Object(L.jsx)(e,{value:"hamster",children:"Hamster"}),Object(L.jsx)(e,{value:"horse",children:"Horse"}),Object(L.jsx)(e,{value:"mouse_rat",children:"Mouse/Rat"}),Object(L.jsx)(e,{value:"rabbit",children:"Rabbit"}),Object(L.jsx)(e,{value:"snake",children:"Snake"}),Object(L.jsx)(e,{value:"spider",children:"Spider"}),Object(L.jsx)(e,{value:"turtle",children:"Turtle"}),Object(L.jsx)(e,{value:"other",children:"Other"})]})}),Object(L.jsx)(be.a.Item,{label:"Price",name:"animal_price_input",children:Object(L.jsx)(U.a,{prefix:"$",suffix:"CAD",placeholder:"Please enter animal price",onChange:function(e){return R(e.target.value)}})}),Object(L.jsxs)(be.a.Item,{label:"Image",name:"animal_image",children:[Object(L.jsx)(Xe.a,{listType:"picture-card",onPreview:oe,onChange:function(e){var t=e.fileList;B({fileList:t})},children:H.length>=8?null:je}),Object(L.jsx)(We.a,{visible:Q,title:ce,footer:null,onCancel:function(){X(!1)},children:Object(L.jsx)("img",{alt:"example",style:{width:"100%"},src:te})})]}),Object(L.jsx)(be.a.Item,{label:"Description",name:"animal_description_input",children:Object(L.jsx)(t,{rows:4,onChange:function(e){return Y(e.target.value)}})}),Object(L.jsxs)(be.a.Item,Object(Ke.a)(Object(Ke.a)({},{wrapperCol:{offset:6,span:18}}),{},{children:[Object(L.jsx)(m.a,{type:"primary",htmlType:"submit",onClick:function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:"Post"}),Object(L.jsx)(m.a,{htmlType:"reset",onClick:function(e){return function(e){e.preventDefault(),le()}(e)},children:"Reset"})]}))]}))]})})]})},rt=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(a.useRef)(""),i=Object(a.useRef)(""),s=Object(a.useRef)(""),o=Object(a.useRef)(""),u=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T(i.current.props.value,c.current.props.value,s.current.props.value,o.current.state.value).then((function(e){alert(e.message),window.location.href="/login"}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){n||P(c.current.props.value),r(!n)};return Object(L.jsxs)("div",{children:[Object(L.jsx)(J,{}),Object(L.jsx)("div",{className:"form_container",children:Object(L.jsxs)("div",{id:"register_form_wrapper",children:[Object(L.jsx)("h1",{className:"form_title",children:"Sign Up"}),Object(L.jsxs)(be.a,Object(Ke.a)(Object(Ke.a)({id:"register_form"},{labelCol:{span:6},wrapperCol:{span:18}}),{},{onFinish:u,children:[Object(L.jsx)(be.a.Item,{label:"Preferred Name",name:"name_input",children:Object(L.jsx)(U.a,{ref:i})}),Object(L.jsx)(be.a.Item,{label:"Email",name:"email_input",children:Object(L.jsx)(U.a,{ref:c})}),Object(L.jsx)(be.a.Item,{label:"Password",name:"password_input",children:Object(L.jsx)(U.a.Password,{ref:s})}),Object(L.jsxs)(be.a.Item,Object(Ke.a)(Object(Ke.a)({},{wrapperCol:{offset:6,span:18}}),{},{children:[Object(L.jsx)(m.a,{type:"primary",htmlType:"button",onClick:j,children:"Submit"}),Object(L.jsx)(m.a,{htmlType:"reset",children:"Reset"})]})),Object(L.jsxs)(We.a,{title:"Email Address Verification",visible:n,onCancel:j,onOk:u,children:[n?Object(L.jsxs)("p",{children:["Verification code has been sent to ",Object(L.jsx)("b",{children:c.current.props.value})]}):"",Object(L.jsx)("p",{children:"Please input your code here:"}),Object(L.jsx)(U.a,{id:"333",ref:o})]})]}))]})})]})},ct=n(524),it=(n(155),n(541)),st=n(542),ot=n(543),lt=n(516),ut=n(520),jt=n(519),dt=n(160),bt=n.n(dt),pt=n(282),ht=function(e){var t=Object(a.useState)([]),n=Object(l.a)(t,2),r=n[0];n[1];return Object(L.jsx)(pt.a,{rotate:!0,shape:"round",children:Object(L.jsx)(Xe.a,{action:function(e){return"http://localhost:9999/api/cur_user/avatar/update"},withCredentials:!0,listType:"picture-card",fileList:r,onChange:e.hideUploadModal,children:r.length<2&&"+ Upload"})})};var Ot=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!1),i=Object(l.a)(c,2),s=i[0],o=i[1],u=Object(a.useState)(!1),j=Object(l.a)(u,2),p=j[0],h=j[1],O=Object(a.useState)(""),f=Object(l.a)(O,2),x=f[0],y=f[1],g=Object(a.useState)(""),w=Object(l.a)(g,2),C=w[0],S=w[1],k=Object(a.useState)(""),I=Object(l.a)(k,2),N=I[0],T=I[1],P=Object(a.useState)(""),_=Object(l.a)(P,2),D=_[0],E=_[1],J=Object(a.useState)(""),R=Object(l.a)(J,2),M=R[0],G=R[1],H=Object(a.useState)(""),V=Object(l.a)(H,2),z=V[0],K=V[1],W=Object(a.useState)(!1),Y=Object(l.a)(W,2),$=Y[0],q=Y[1],Q=Object(a.useState)(!1),X=Object(l.a)(Q,2),Z=X[0],ee=X[1];Object(a.useEffect)(Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F().then((function(e){r(e.uuid),y(e.name),T(e.phone),S(e.email),E(e.city),G(e.intro),K(e.avatar),ee(!0)}));case 2:case"end":return e.stop()}}),e)}))),[p,$,z]);var te=function(){(o(!s),s)&&A({inputName:x,inputPNumber:N,inputCity:D,inputIntro:M}).then((function(){h(!p)}))};return Object(L.jsxs)("div",{children:[Object(L.jsx)("div",{className:"avatar",children:Object(L.jsx)(v.a,{size:64,src:Object(L.jsx)(lt.a,{src:z,height:64,width:64,preview:!1,onClick:function(){q(!0)}})})}),Object(L.jsxs)("div",{style:{textAlign:"end",paddingRight:"3%",paddingTop:"0.5%",fontSize:"20px"},children:["Account: ",Object(L.jsx)("b",{children:C})]}),Object(L.jsx)(bt.a,{title:"Update your avatar!",visible:$,onCancel:function(){q(!1)},width:250,footer:null,children:Object(L.jsx)(ht,{hideUploadModal:function(){q(!1)}})}),Object(L.jsxs)(B.a,{title:"Profile",bordered:!1,children:[Object(L.jsx)("br",{}),Object(L.jsxs)(ae.b,{title:"",bordered:!0,children:[Object(L.jsx)(ae.b.Item,{label:"User Name",span:3,children:s?Object(L.jsx)(U.a,{value:x,type:"text",onChange:function(e){y(e.target.value)}.bind(this)}):Object(L.jsx)(U.a,{value:x,type:"text",disabled:"true"})}),Object(L.jsx)(ae.b.Item,{label:"Phone Number",span:3,children:s?Object(L.jsx)(U.a,{value:N,type:"text",onChange:function(e){T(e.target.value)}.bind(this)}):Object(L.jsx)(U.a,{value:N,type:"text",disabled:"true"})}),Object(L.jsx)(ae.b.Item,{label:"City",span:3,children:s?Object(L.jsx)(U.a,{value:D,type:"text",onChange:function(e){E(e.target.value)}.bind(this)}):Object(L.jsx)(U.a,{value:D,type:"text",disabled:"true"})}),Object(L.jsx)(ae.b.Item,{label:"Intro",span:3,children:s?Object(L.jsx)(U.a,{value:M,type:"text",onChange:function(e){G(e.target.value)}.bind(this)}):Object(L.jsx)(U.a,{value:M,type:"text",disabled:"true"})})]}),Object(L.jsx)(m.a,{type:"dashed",style:{float:"right"},onClick:te,children:s?"FINISH":"EDIT"})]}),Object(L.jsx)("br",{}),Object(L.jsx)(B.a,{title:"Rating",bordered:!1,children:Object(L.jsx)(ut.a,{allowHalf:!0,disabled:!0,defaultValue:4.5})}),Object(L.jsx)(B.a,{title:"Comments",bordered:!1,children:Z?Object(L.jsx)(Oe,{id:n,commentType:"user"}):Object(L.jsx)(jt.a,{active:!0})}),Object(L.jsx)("br",{})]})},ft=n(76),mt=n(132),xt=B.a.Meta;var vt=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],r=t[1];Object(a.useEffect)(Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:tt().then((function(e){r(e)}));case 1:case"end":return e.stop()}}),e)}))),[]);var c=n.map((function(e){return Object(L.jsx)(ft.a,{xs:24,md:12,lg:8,xl:6,xxl:4,children:Object(L.jsx)(B.a,{hoverable:!0,style:{height:"95%",objectFit:"cover",width:200},cover:Object(L.jsx)("img",{alt:e.name,src:e.image,width:"200",height:"180"}),children:Object(L.jsx)(xt,{title:e.name,description:e.description})})})}));return Object(L.jsxs)("div",{style:{height:"100%",overflow:"auto"},children:[Object(L.jsx)("br",{}),Object(L.jsx)(mt.a,{gutter:16,children:c})]})},yt=n(511),gt=n(285),wt=yt.a.Column;yt.a.ColumnGroup;var Ct=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)(Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Te().then((function(e){r(e),console.log(n)}));case 1:case"end":return e.stop()}}),e)}))),[]),Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("br",{}),Object(L.jsxs)(yt.a,{rowKey:function(e){return e.orderNumber},expandable:{expandedRowRender:function(e){return Object(L.jsxs)("p",{children:["Transaction ID: ",e._id]})}},dataSource:n,children:[Object(L.jsx)(wt,{title:"",dataIndex:"orderNumber"},"orderNumber"),Object(L.jsx)(wt,{title:"Order Placed",dataIndex:"timestamp"},"timestamp"),Object(L.jsx)(wt,{title:"From",dataIndex:"sellerId"},"sellerId"),Object(L.jsx)(wt,{title:"Ship to",dataIndex:"buyerId"},"buyerId"),Object(L.jsx)(wt,{title:"Total",dataIndex:"price"},"price"),Object(L.jsx)(wt,{title:"Status",dataIndex:"status"},"status"),Object(L.jsx)(wt,{title:"TAG",dataIndex:"tag",render:function(e){return Object(L.jsx)(L.Fragment,{children:Object(L.jsx)(gt.a,{color:"green",children:e},e)})}},"tag")]})]})},St=u.a.Content,kt=u.a.Sider,It=Object(o.g)((function(e){var t=Object(a.useState)(e.location.state.key),n=Object(l.a)(t,2),r=n[0],c=n[1];return Object(L.jsxs)(u.a,{children:[Object(L.jsx)(J,{}),Object(L.jsxs)(u.a,{children:[Object(L.jsx)(kt,{width:300,children:Object(L.jsxs)(h.a,{mode:"inline",defaultSelectedKeys:r,defaultOpenKeys:["sub1"],style:{height:"100%",borderRight:0},onClick:function(e){return c(e.key)},children:[Object(L.jsx)(h.a.Item,{icon:Object(L.jsx)(it.a,{}),children:"Basic Information"},"1"),Object(L.jsx)(h.a.Item,{icon:Object(L.jsx)(st.a,{}),children:"Posted Animals"},"2"),Object(L.jsx)(h.a.Item,{icon:Object(L.jsx)(ot.a,{}),children:"Transaction History"},"3")]})}),Object(L.jsxs)(u.a,{className:"right-container",style:{padding:"0 24px 24px"},children:[Object(L.jsx)(ct.a,{style:{margin:"16px 0"}}),Object(L.jsx)(St,{className:"site-layout-background",children:Object(L.jsx)("div",{style:{height:"100%",overflow:"auto"},children:function(e){switch(e){case"1":return Object(L.jsx)(Ot,{});case"2":return Object(L.jsx)(vt,{});case"3":return Object(L.jsx)(Ct,{})}}(r)})})]})]})]})})),Nt=function(e){var t=function(){var t=Object(b.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D(e.match.params.token,n.password).then((function(e){return alert(e.message)}));case 2:window.location.href="/login";case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return console.log(e.match.params.token),Object(L.jsx)("div",{className:"form_container",children:Object(L.jsxs)("div",{id:"register_form_wrapper",children:[Object(L.jsx)("h1",{className:"form_title",children:"Reset Password"}),Object(L.jsxs)(be.a,Object(Ke.a)(Object(Ke.a)({},{labelCol:{span:6},wrapperCol:{span:18}}),{},{onFinish:t,children:[Object(L.jsx)(be.a.Item,{label:"New password:",name:"password",children:Object(L.jsx)(U.a.Password,{})}),Object(L.jsx)(be.a.Item,{wrapperCol:{offset:10,span:18},children:Object(L.jsx)(m.a,{type:"primary",htmlType:"submit",children:"Submit"})})]}))]})})};var Tt=function(){return Object(L.jsx)(s.a,{children:Object(L.jsxs)(o.d,{children:[Object(L.jsx)(o.b,{exact:!0,path:"/",children:Object(L.jsx)(o.a,{to:"/map"})}),Object(L.jsx)(o.b,{path:"/map",children:Object(L.jsx)(ze,{})}),Object(L.jsx)(o.b,{path:"/login",children:Object(L.jsx)(Ye,{})}),Object(L.jsx)(o.b,{path:"/post",children:Object(L.jsx)(at,{})}),Object(L.jsx)(o.b,{path:"/register",children:Object(L.jsx)(rt,{})}),Object(L.jsx)(o.b,{path:"/user",children:Object(L.jsx)(It,{})}),Object(L.jsx)(o.b,{path:"/reset_pwd/:token",component:Nt}),Object(L.jsx)(o.b,{path:"/commenttest",children:Object(L.jsx)(Oe,{commentType:"animal",id:"0"})})]})})},Pt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,544)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};i.a.render(Object(L.jsx)(r.a.StrictMode,{children:Object(L.jsx)(Tt,{})}),document.getElementById("root")),Pt()}},[[504,1,2]]]);
//# sourceMappingURL=main.2b2ccedc.chunk.js.map